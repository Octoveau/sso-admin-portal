{"version":3,"sources":["webpack:///./src/views/user/userDetail.vue","webpack:///./src/api/user.js","webpack:///src/views/user/userDetail.vue","webpack:///./src/views/user/userDetail.vue?a904","webpack:///./src/views/user/userDetail.vue?7405","webpack:///./src/views/user/userDetail.vue?7f93"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","isLoading","expression","staticClass","staticStyle","attrs","on","onInput","model","userPhone","callback","$$v","trim","onSearch","_v","onReset","tableData","scopedSlots","_u","key","fn","scope","_s","getDateStr","row","createDate","getPhoneStr","phone","active","isDelete","$event","onDelete","pageInfo","page","size","totleCount","handleSizeChange","handleCurrentChange","staticRenderFns","getUserData","params","service","get","getUserDataByPhone","deleteUserByPhone","delete","data","mounted","methods","then","finally","serachUserData","x","searchUserDataByPhone","component"],"mappings":"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","file":"js/chunk-0873c1fc.f1a8e7d0.js","sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isLoading),expression:\"isLoading\"}],staticClass:\"section\"},[_c('div',{staticClass:\"header\"},[_c('el-input',{staticStyle:{\"width\":\"5rem\"},attrs:{\"maxlength\":\"11\",\"placeholder\":\"请输入用户完整手机号查询\"},on:{\"input\":_vm.onInput},model:{value:(_vm.userPhone),callback:function ($$v) {_vm.userPhone=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"userPhone\"}}),_c('el-button',{staticStyle:{\"margin-left\":\"0.2rem\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSearch}},[_vm._v(\"查询\")]),_c('el-button',{staticStyle:{\"margin-left\":\"0.2rem\"},on:{\"click\":_vm.onReset}},[_vm._v(\"重置\")])],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"border\":true,\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"nickName\",\"label\":\"用户昵称\"}}),_c('el-table-column',{attrs:{\"prop\":\"createDate\",\"label\":\"创建时间\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm.getDateStr(scope.row.createDate)))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"phone\",\"label\":\"电话信息\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm.getPhoneStr(scope.row.phone)))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"active\",\"label\":\"用户状态\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"effect\":\"dark\",\"type\":`${scope.row.active ? 'success' : 'danger'}`}},[_vm._v(_vm._s(scope.row.active ? '使用中' : '已停用'))])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"roles\",\"label\":\"用户角色\"}},[[_c('el-tag',[_vm._v(\"普通用户\")])]],2),_c('el-table-column',{attrs:{\"label\":\"操作\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"danger\",\"loading\":scope.row.isDelete},on:{\"click\":function($event){return _vm.onDelete(scope.row)}}},[_vm._v(_vm._s(scope.row.isDelete ? '删除中' : '删除'))])]}}])})],1),_c('div',{staticClass:\"footer\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.pageInfo.page,\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.pageInfo.size,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.totleCount},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import service from './index';\r\n\r\n//获取用户列表\r\nexport const getUserData = (params) => service.get(`/api/users`, { params });\r\n\r\n//获取用户列表通过手机号\r\nexport const getUserDataByPhone = (phone) => service.get(`/api/users/${phone}`);\r\n\r\n//通过手机号删除用户\r\nexport const deleteUserByPhone = (phone) => service.delete(`/api/users/${phone}`);\r\n","<template>\r\n  <section class=\"section\" v-loading=\"isLoading\">\r\n    <div class=\"header\">\r\n      <el-input maxlength=\"11\" @input=\"onInput\" v-model.trim=\"userPhone\" placeholder=\"请输入用户完整手机号查询\" style=\"width: 5rem\"></el-input>\r\n      <el-button type=\"primary\" style=\"margin-left: 0.2rem\" @click=\"onSearch\">查询</el-button>\r\n      <el-button style=\"margin-left: 0.2rem\" @click=\"onReset\">重置</el-button>\r\n    </div>\r\n    <el-table :border=\"true\" :data=\"tableData\" style=\"width: 100%\">\r\n      <el-table-column prop=\"nickName\" label=\"用户昵称\"></el-table-column>\r\n      <el-table-column prop=\"createDate\" label=\"创建时间\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{ getDateStr(scope.row.createDate) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"phone\" label=\"电话信息\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{ getPhoneStr(scope.row.phone) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"active\" label=\"用户状态\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag effect=\"dark\" :type=\"`${scope.row.active ? 'success' : 'danger'}`\">{{ scope.row.active ? '使用中' : '已停用' }}</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"roles\" label=\"用户角色\">\r\n        <template>\r\n          <el-tag>普通用户</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"danger\" @click=\"onDelete(scope.row)\" :loading=\"scope.row.isDelete\">{{ scope.row.isDelete ? '删除中' : '删除' }}</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div class=\"footer\">\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"pageInfo.page\"\r\n        :page-sizes=\"[10, 20, 50, 100]\"\r\n        :page-size=\"pageInfo.size\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"totleCount\"\r\n      ></el-pagination>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport { getUserData, getUserDataByPhone, deleteUserByPhone } from '@/api/user';\r\nimport moment from 'moment';\r\nexport default {\r\n  name: 'UserDetailPage',\r\n  data() {\r\n    return {\r\n      //用户手机号查询\r\n      userPhone: '',\r\n      isLoading: false,\r\n      pageInfo: {\r\n        page: 1,\r\n        size: 10,\r\n      },\r\n      tableData: [],\r\n      totleCount: 0,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.serachUserData();\r\n  },\r\n  methods: {\r\n    handleSizeChange(data) {\r\n      this.page = 1;\r\n      this.pageInfo.size = data;\r\n      this.serachUserData();\r\n    },\r\n    handleCurrentChange(data) {\r\n      this.pageInfo.page = data;\r\n      this.serachUserData();\r\n    },\r\n    onDelete(data) {\r\n      data.isDelete = true;\r\n      deleteUserByPhone(data.phone)\r\n        .then((res) => {\r\n          if (res.code === 200) {\r\n            this.$message.success('删除成功');\r\n            //刷新数据\r\n            this.onSearch();\r\n          }\r\n        })\r\n        .finally(() => {\r\n          data.isDelete = false;\r\n        });\r\n    },\r\n    getDateStr(time) {\r\n      return moment(time).format('YYYY年MM月DD日 HH时:mm分:ss秒');\r\n    },\r\n    getPhoneStr(phone) {\r\n      return phone.slice(0, 4) + '*****' + phone.slice(-1);\r\n    },\r\n    onReset() {\r\n      this.pageInfo = {\r\n        size: 10,\r\n        page: 0,\r\n      };\r\n      this.serachUserData();\r\n    },\r\n    onInput(data) {\r\n      this.userPhone = data.replace(/[^\\d]/g, '');\r\n    },\r\n    onSearch() {\r\n      //判断是否输入用户手机号进行查询\r\n      this.userPhone ? this.searchUserDataByPhone() : this.serachUserData();\r\n    },\r\n    serachUserData() {\r\n      this.isLoading = true;\r\n      let request = {\r\n        page: this.pageInfo.page - 1,\r\n        size: this.pageInfo.size,\r\n      };\r\n      getUserData(request)\r\n        .then((res) => {\r\n          if (res.code === 200) {\r\n            this.tableData = res.data.data.map((x) => {\r\n              x.isDelete = false;\r\n              return x;\r\n            });\r\n            this.totleCount = res.data.total;\r\n          }\r\n        })\r\n        .finally(() => {\r\n          this.isLoading = false;\r\n        });\r\n    },\r\n    searchUserDataByPhone() {\r\n      this.isLoading = true;\r\n      getUserDataByPhone(this.userPhone)\r\n        .then((res) => {\r\n          if (res.code === 200) {\r\n            this.tableData = [res.data].map((x) => {\r\n              x.isDelete = false;\r\n              return x;\r\n            });\r\n            this.totleCount = 1;\r\n          }\r\n        })\r\n        .finally(() => {\r\n          this.isLoading = false;\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped lang=\"less\">\r\n.section {\r\n  padding: 0.2rem;\r\n  .header {\r\n    display: flex;\r\n    margin-bottom: 0.2rem;\r\n  }\r\n  /deep/ .el-table {\r\n    max-height: calc(100vh - 3rem);\r\n    overflow: auto;\r\n  }\r\n}\r\n.footer {\r\n  position: fixed;\r\n  bottom: 0.2rem;\r\n  right: 0.6rem;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./userDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./userDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./userDetail.vue?vue&type=template&id=c96d019a&scoped=true&\"\nimport script from \"./userDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./userDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./userDetail.vue?vue&type=style&index=0&id=c96d019a&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"c96d019a\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./userDetail.vue?vue&type=style&index=0&id=c96d019a&prod&scoped=true&lang=less&\""],"sourceRoot":""}