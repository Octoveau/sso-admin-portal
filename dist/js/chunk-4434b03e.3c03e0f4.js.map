{"version":3,"sources":["webpack:///./src/views/siteKey/siteKeyDetail.vue?19c7","webpack:///./src/views/siteKey/siteKeyDetail.vue","webpack:///./src/api/siteKey.js","webpack:///src/views/siteKey/siteKeyDetail.vue","webpack:///./src/views/siteKey/siteKeyDetail.vue?c60d","webpack:///./src/views/siteKey/siteKeyDetail.vue?176d"],"names":["render","_vm","this","_c","_self","directives","name","rawName","value","isLoading","expression","staticClass","staticStyle","attrs","model","userSiteKey","callback","$$v","trim","on","onSearch","_v","onReset","tableData","scopedSlots","_u","key","fn","scope","row","state","_s","status","_e","getDateStr","createDate","isDelete","$event","onDelete","pageInfo","page","size","totleCount","handleSizeChange","handleCurrentChange","staticRenderFns","getsiteKeyData","params","service","get","getDataBySiteKey","siteKey","deleteSiteKey","delete","data","mounted","methods","then","finally","serachUserData","console","x","searchUserDataByPhone","component"],"mappings":"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","file":"js/chunk-4434b03e.3c03e0f4.js","sourcesContent":["export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--11-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--11-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--11-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--11-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./siteKeyDetail.vue?vue&type=style&index=0&id=2400ff8d&prod&scoped=true&lang=less&\"","var render = function render(){var _vm=this,_c=_vm._self._c;return _c('section',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.isLoading),expression:\"isLoading\"}],staticClass:\"section\"},[_c('div',{staticClass:\"header\"},[_c('el-input',{staticStyle:{\"width\":\"5rem\"},attrs:{\"maxlength\":\"11\",\"placeholder\":\"请输入用户完整的SiteKey\"},model:{value:(_vm.userSiteKey),callback:function ($$v) {_vm.userSiteKey=(typeof $$v === 'string'? $$v.trim(): $$v)},expression:\"userSiteKey\"}}),_c('el-button',{staticStyle:{\"margin-left\":\"0.2rem\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.onSearch}},[_vm._v(\"查询\")]),_c('el-button',{staticStyle:{\"margin-left\":\"0.2rem\"},on:{\"click\":_vm.onReset}},[_vm._v(\"重置\")])],1),_c('el-table',{staticStyle:{\"width\":\"100%\"},attrs:{\"border\":true,\"data\":_vm.tableData}},[_c('el-table-column',{attrs:{\"prop\":\"siteName\",\"label\":\"SiteKey名称\",\"show-overflow-tooltip\":true,\"width\":\"200px\"}}),_c('el-table-column',{attrs:{\"prop\":\"siteKey\",\"label\":\"SiteKey\",\"show-overflow-tooltip\":true,\"width\":\"400px\"}}),_c('el-table-column',{attrs:{\"prop\":\"siteSecret\",\"label\":\"SiteKey密钥\",\"show-overflow-tooltip\":true,\"width\":\"200px\"}}),_c('el-table-column',{attrs:{\"prop\":\"callbackUrl\",\"label\":\"回调地址\",\"show-overflow-tooltip\":true}}),_c('el-table-column',{attrs:{\"prop\":\"state\",\"label\":\"SiteKey状态\",\"show-overflow-tooltip\":true,\"width\":\"150px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-tag',{attrs:{\"effect\":\"dark\",\"type\":`${scope.row.state === 'DISBALE' ? 'danger' : 'success'}`}},[_vm._v(\" \"+_vm._s(scope.row.state === 'DISBALE' ? '冻结中' : '启用中')+\" \")])]}}])}),_c('el-table-column',{attrs:{\"prop\":\"status\",\"label\":\"审批状态\",\"show-overflow-tooltip\":true,\"width\":\"150px\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [(scope.row.status === 'PENDING')?_c('el-tag',{attrs:{\"effect\":\"dark\"}},[_vm._v(\"审批中\")]):_vm._e(),(scope.row.status === 'APPROVED')?_c('el-tag',{attrs:{\"effect\":\"dark\",\"type\":\"success\"}},[_vm._v(\"审批通过\")]):_vm._e(),(scope.row.status === 'REJECT')?_c('el-tag',{attrs:{\"effect\":\"dark\",\"type\":\"danger\"}},[_vm._v(\"审批驳回\")]):_vm._e()]}}])}),_c('el-table-column',{attrs:{\"prop\":\"createBy\",\"label\":\"创建者\",\"show-overflow-tooltip\":true,\"width\":\"200px\"}}),_c('el-table-column',{attrs:{\"prop\":\"createDate\",\"label\":\"创建时间\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('span',[_vm._v(_vm._s(_vm.getDateStr(scope.row.createDate)))])]}}])}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"width\":\"150px\",\"show-overflow-tooltip\":true},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"danger\",\"loading\":scope.row.isDelete},on:{\"click\":function($event){return _vm.onDelete(scope.row)}}},[_vm._v(_vm._s(scope.row.isDelete ? '删除中' : '删除'))])]}}])})],1),_c('div',{staticClass:\"footer\"},[_c('el-pagination',{attrs:{\"current-page\":_vm.pageInfo.page,\"page-sizes\":[10, 20, 50, 100],\"page-size\":_vm.pageInfo.size,\"layout\":\"total, sizes, prev, pager, next, jumper\",\"total\":_vm.totleCount},on:{\"size-change\":_vm.handleSizeChange,\"current-change\":_vm.handleCurrentChange}})],1)],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import service from './index';\r\n\r\n//获取站点列表\r\nexport const getsiteKeyData = (params) => service.get(`/api/sites`, { params });\r\n\r\n//获取用户列表通过sitekey\r\nexport const getDataBySiteKey = (siteKey) => service.get(`/api/sites/${siteKey}/info`);\r\n\r\n//通过手机号删除用户\r\nexport const deleteSiteKey = (siteKey) => service.delete(`/api/sites/${siteKey}`);\r\n\r\n//创建站点信息\r\nexport const createSiteKeyData = (data) => service.post(`/api/sites`, data);\r\n","<template>\r\n  <section class=\"section\" v-loading=\"isLoading\">\r\n    <div class=\"header\">\r\n      <el-input maxlength=\"11\" v-model.trim=\"userSiteKey\" placeholder=\"请输入用户完整的SiteKey\" style=\"width: 5rem\"></el-input>\r\n      <el-button type=\"primary\" style=\"margin-left: 0.2rem\" @click=\"onSearch\">查询</el-button>\r\n      <el-button style=\"margin-left: 0.2rem\" @click=\"onReset\">重置</el-button>\r\n    </div>\r\n    <el-table :border=\"true\" :data=\"tableData\" style=\"width: 100%\">\r\n      <el-table-column prop=\"siteName\" label=\"SiteKey名称\" :show-overflow-tooltip=\"true\" width=\"200px\"></el-table-column>\r\n      <el-table-column prop=\"siteKey\" label=\"SiteKey\" :show-overflow-tooltip=\"true\" width=\"400px\"></el-table-column>\r\n      <el-table-column prop=\"siteSecret\" label=\"SiteKey密钥\" :show-overflow-tooltip=\"true\" width=\"200px\"></el-table-column>\r\n      <el-table-column prop=\"callbackUrl\" label=\"回调地址\" :show-overflow-tooltip=\"true\"></el-table-column>\r\n      <el-table-column prop=\"state\" label=\"SiteKey状态\" :show-overflow-tooltip=\"true\" width=\"150px\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag effect=\"dark\" :type=\"`${scope.row.state === 'DISBALE' ? 'danger' : 'success'}`\">\r\n            {{ scope.row.state === 'DISBALE' ? '冻结中' : '启用中' }}\r\n          </el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"status\" label=\"审批状态\" :show-overflow-tooltip=\"true\" width=\"150px\">\r\n        <template slot-scope=\"scope\">\r\n          <el-tag v-if=\"scope.row.status === 'PENDING'\" effect=\"dark\">审批中</el-tag>\r\n          <el-tag v-if=\"scope.row.status === 'APPROVED'\" effect=\"dark\" type=\"success\">审批通过</el-tag>\r\n          <el-tag v-if=\"scope.row.status === 'REJECT'\" effect=\"dark\" type=\"danger\">审批驳回</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"createBy\" label=\"创建者\" :show-overflow-tooltip=\"true\" width=\"200px\"></el-table-column>\r\n      <el-table-column prop=\"createDate\" label=\"创建时间\" :show-overflow-tooltip=\"true\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{ getDateStr(scope.row.createDate) }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" width=\"150px\" :show-overflow-tooltip=\"true\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button type=\"danger\" @click=\"onDelete(scope.row)\" :loading=\"scope.row.isDelete\">{{ scope.row.isDelete ? '删除中' : '删除' }}</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <div class=\"footer\">\r\n      <el-pagination\r\n        @size-change=\"handleSizeChange\"\r\n        @current-change=\"handleCurrentChange\"\r\n        :current-page=\"pageInfo.page\"\r\n        :page-sizes=\"[10, 20, 50, 100]\"\r\n        :page-size=\"pageInfo.size\"\r\n        layout=\"total, sizes, prev, pager, next, jumper\"\r\n        :total=\"totleCount\"\r\n      ></el-pagination>\r\n    </div>\r\n  </section>\r\n</template>\r\n\r\n<script>\r\nimport { getsiteKeyData, getDataBySiteKey, deleteSiteKey } from '@/api/siteKey';\r\nimport moment from 'moment';\r\nexport default {\r\n  name: 'UserDetailPage',\r\n  data() {\r\n    return {\r\n      //用户手机号查询\r\n      userSiteKey: '',\r\n      isLoading: false,\r\n      pageInfo: {\r\n        page: 1,\r\n        size: 10,\r\n      },\r\n      tableData: [],\r\n      totleCount: 0,\r\n    };\r\n  },\r\n  mounted() {\r\n    this.serachUserData();\r\n  },\r\n  methods: {\r\n    handleSizeChange(data) {\r\n      this.page = 1;\r\n      this.pageInfo.size = data;\r\n      this.serachUserData();\r\n    },\r\n    handleCurrentChange(data) {\r\n      this.pageInfo.page = data;\r\n      this.serachUserData();\r\n    },\r\n    onDelete(data) {\r\n      data.isDelete = true;\r\n      deleteSiteKey(data.siteKey)\r\n        .then((res) => {\r\n          if (res.code === 200) {\r\n            this.$message.success('删除成功');\r\n            //刷新数据\r\n            this.onSearch();\r\n          }\r\n        })\r\n        .finally(() => {\r\n          data.isDelete = false;\r\n        });\r\n    },\r\n    getDateStr(time) {\r\n      return moment(time).format('YYYY年MM月DD日 HH时:mm分:ss秒');\r\n    },\r\n    onReset() {\r\n      this.pageInfo = {\r\n        size: 10,\r\n        page: 0,\r\n      };\r\n      this.serachUserData();\r\n    },\r\n    onSearch() {\r\n      //判断是否输入用户手机号进行查询\r\n      this.userSiteKey ? this.searchUserDataByPhone() : this.serachUserData();\r\n    },\r\n    serachUserData() {\r\n      this.isLoading = true;\r\n      let request = {\r\n        page: this.pageInfo.page - 1,\r\n        size: this.pageInfo.size,\r\n      };\r\n      getsiteKeyData(request)\r\n        .then((res) => {\r\n          if (res.code === 200) {\r\n            console.log(232222, res.data);\r\n            this.tableData = res.data.data.map((x) => {\r\n              x.isDelete = false;\r\n              return x;\r\n            });\r\n            this.totleCount = res.data.total;\r\n          }\r\n        })\r\n        .finally(() => {\r\n          this.isLoading = false;\r\n        });\r\n    },\r\n    searchUserDataByPhone() {\r\n      this.isLoading = true;\r\n      getDataBySiteKey(this.userSiteKey)\r\n        .then((res) => {\r\n          if (res.code === 200) {\r\n            this.tableData = [res.data].map((x) => {\r\n              x.isDelete = false;\r\n              return x;\r\n            });\r\n            this.totleCount = 1;\r\n          }\r\n        })\r\n        .finally(() => {\r\n          this.isLoading = false;\r\n        });\r\n    },\r\n  },\r\n};\r\n</script>\r\n<style scoped lang=\"less\">\r\n.section {\r\n  padding: 0.2rem;\r\n  .header {\r\n    display: flex;\r\n    margin-bottom: 0.2rem;\r\n  }\r\n  /deep/ .el-table {\r\n    max-height: calc(100vh - 3rem);\r\n    overflow: auto;\r\n  }\r\n}\r\n.footer {\r\n  position: fixed;\r\n  bottom: 0.2rem;\r\n  right: 0.6rem;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./siteKeyDetail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--1-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./siteKeyDetail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./siteKeyDetail.vue?vue&type=template&id=2400ff8d&scoped=true&\"\nimport script from \"./siteKeyDetail.vue?vue&type=script&lang=js&\"\nexport * from \"./siteKeyDetail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./siteKeyDetail.vue?vue&type=style&index=0&id=2400ff8d&prod&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"2400ff8d\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}