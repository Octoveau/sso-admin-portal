(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4b8c976e"],{"03fd":function(e,t,r){"use strict";r.d(t,"a",(function(){return n})),r.d(t,"b",(function(){return a})),r.d(t,"c",(function(){return l})),r.d(t,"d",(function(){return c}));r("d9e2");const i=(e,t,r)=>{let i=new RegExp("^1\\d{10}$");i.test(t)?r():r(new Error("请输入正确的手机号"))},s=(e,t,r)=>{let i=/^(?=.*[A-Za-z])(?=.*\d)(?=.*[`~!@#$%^&*()_+<>?:"{},.\/\\;'[\]])[A-Za-z\d`~!@#$%^&*()_+<>?:"{},.\/\\;'[\]]{8,}$/;i.test(t)?r():r(new Error("密码至少8位且必有数字+特殊字符+字母"))},o=(e,t,r)=>{let i=/^[0-9]+.?[0-9]*/;i.test(t)?r():r(new Error("请输入正确的数值"))},n={phone:[{required:!0,message:"请输入用户手机号",trigger:"blur"},{validator:o,trigger:"blur"},{validator:i,trigger:"blur"}],password:[{required:!0,message:"请输入用户密码",trigger:"blur"},{validator:s,trigger:"blur"}],verificationCode:[{required:!0,message:"请输入验证码",trigger:"blur"},{validator:o,trigger:"blur"}]},a={phone:[{required:!0,message:"请输入用户手机号",trigger:"blur"},{validator:o,trigger:"blur"},{validator:i,trigger:"blur"}],password:[{required:!0,message:"请输入用户密码",trigger:"blur"},{validator:s,trigger:"blur"}],rePassword:[{required:!0,message:"请再次确认密码",trigger:"blur"},{validator:s,trigger:"blur"}],verificationCode:[{required:!0,message:"请输入验证码",trigger:"blur"},{validator:o,trigger:"blur"}]},l={phone:[{required:!0,message:"请输入用户手机号",trigger:"blur"},{validator:o,trigger:"blur"},{validator:i,trigger:"blur"}],password:[{required:!0,message:"请输入用户密码",trigger:"blur"},{validator:s,trigger:"blur"}],verificationCode:[{required:!0,message:"请输入验证码",trigger:"blur"},{validator:o,trigger:"blur"}]},c={isShowSilder:!1,isSilderSuccess:!1}},1479:function(e,t,r){},"14d9":function(e,t,r){"use strict";var i=r("23e7"),s=r("7b0b"),o=r("07fa"),n=r("3a34"),a=r("3511"),l=r("d039"),c=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),d=!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}}();i({target:"Array",proto:!0,arity:1,forced:c||d},{push:function(e){var t=s(this),r=o(t),i=arguments.length;a(r+i);for(var l=0;l<i;l++)t[r]=arguments[l],r++;return n(t,r),r}})},"1bf6":function(e,t,r){var i={"./1.png":["1e49","chunk-2d0b68cf"],"./2.png":["7ce6","chunk-2d0e2173"],"./3.png":["2b16","chunk-2d0bd18b"],"./4.png":["1679","chunk-2d0ab8bd"],"./5.png":["a563","chunk-2d2086a7"],"./6.png":["23bc","chunk-2d0b2738"]};function s(e){if(!r.o(i,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=i[e],s=t[0];return r.e(t[1]).then((function(){return r.t(s,7)}))}s.keys=function(){return Object.keys(i)},s.id="1bf6",e.exports=s},"25b7":function(e,t,r){},"2a2b":function(e,t,r){"use strict";var i=function(){var e=this,t=e._self._c;return t("section",{staticClass:"back-section"},[t("div",{staticClass:"header"},[e._t("header",(function(){return[t("header",{staticClass:"header"},[t("el-button",{attrs:{type:"text"}},[e._v("用户管理")]),t("el-button",{attrs:{type:"text"}},[e._v("关于我们")]),t("el-button",{attrs:{type:"text"}},[e._v("帮助中心")])],1)]}))],2),t("div",{staticClass:"container"},[e._t("container")],2),e._t("footer",(function(){return[t("el-image",{staticClass:"back-img",attrs:{src:e.footerImg}})]}))],2)},s=[],o=r("eea0"),n=r.n(o),a={data(){return{footerImg:n.a}}},l=a,c=(r("bb72"),r("2877")),d=Object(c["a"])(l,i,s,!1,null,null,null);t["a"]=d.exports},3511:function(e,t){var r=TypeError,i=9007199254740991;e.exports=function(e){if(e>i)throw r("Maximum allowed index exceeded");return e}},3786:function(e,t,r){"use strict";r.d(t,"b",(function(){return s})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return n}));var i=r("365c");const s=e=>i["a"].post("/api/auth/login",e),o=e=>i["a"].post("/api/users/register",e),n=()=>{let e=Math.floor(8999*Math.random())+1e3;return Promise.resolve({data:{code:e},code:200,message:"注册成功"})}},"3a34":function(e,t,r){"use strict";var i=r("83ab"),s=r("e8b5"),o=TypeError,n=Object.getOwnPropertyDescriptor,a=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}();e.exports=a?function(e,t){if(s(e)&&!n(e,"length").writable)throw o("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t}},"42ba":function(e,t,r){},9785:function(e,t,r){},"9d6e":function(e,t,r){"use strict";r("9785")},a2eb:function(e,t,r){e.exports=r.p+"img/loginicon.b49bff48.png"},a598:function(e,t,r){"use strict";r("25b7")},bb72:function(e,t,r){"use strict";r("42ba")},bd01:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e._self._c;return t("section",{staticClass:"main"},[t("AuthBackComp",{scopedSlots:e._u([{key:"container",fn:function(){return[t("h3",{staticClass:"h3"},[e._v("Octoveau统一登录平台")]),t("LoginContainerComp")]},proxy:!0}])}),e.silderConfig.isShowSilder?t("Silder"):e._e()],1)},s=[],o=r("2a2b"),n=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-form"},[t("div",{staticClass:"left"},[t("el-image",{attrs:{src:e.loginLeftPic}})],1),t("div",{staticClass:"right"},[t("div",{staticClass:"header"},[t("span",{staticClass:"title"},[t("P",{class:1===this.defaultLabel?"p-choose":null,on:{click:function(t){return e.changeLabel(1)}}},[e._v("手机号验证码登录")]),t("P",{class:2===this.defaultLabel?"p-choose":null,on:{click:function(t){return e.changeLabel(2)}}},[e._v("账号密码登录")])],1),t("span",[t("LoginFormComp",{attrs:{registerType:e.defaultLabel}})],1)]),t("div",{staticClass:"footer"},[t("el-button",{attrs:{type:"text"},on:{click:e.gotoRegister}},[e._v("立即注册")]),t("span"),t("el-button",{attrs:{type:"text"},on:{click:e.resetPwd}},[e._v("忘记密码")])],1)])])},a=[],l=(r("14d9"),function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-container"},[t("el-form",{ref:"loginForm",staticClass:"login-form",attrs:{model:e.loginForm,rules:e.loginRules,autocomplete:"on","label-position":"left"}},[t("el-form-item",{attrs:{prop:"phone"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"user"}})],1),t("el-input",{attrs:{placeholder:"手机号",maxlength:"11"},model:{value:e.loginForm.phone,callback:function(t){e.$set(e.loginForm,"phone","string"===typeof t?t.trim():t)},expression:"loginForm.phone"}})],1),1===e.registerType?t("span",[t("el-form-item",{attrs:{prop:"verificationCode"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"edit"}})],1),t("el-input",{attrs:{placeholder:"验证码",name:"verificationCode",maxlength:"4"},model:{value:e.loginForm.verificationCode,callback:function(t){e.$set(e.loginForm,"verificationCode","string"===typeof t?t.trim():t)},expression:"loginForm.verificationCode"}}),t("span",[e.isCanSendCode?t("a",{staticClass:"a-verification",attrs:{loading:e.verCodeLoading},on:{click:e.onGetVerificationCode}},[e._v("获取验证码")]):t("span",{staticStyle:{color:"rgb(185 185 185)"}},[e._v("重新发送"+e._s(e.timeCount)+"(s)")])])],1)],1):t("span",[t("el-form-item",{attrs:{prop:"password"}},[t("span",{staticClass:"svg-container"},[t("svg-icon",{attrs:{"icon-class":"password"}})],1),t("el-input",{attrs:{maxlength:"20",type:e.passwordType,placeholder:"密码",name:"password"},model:{value:e.loginForm.password,callback:function(t){e.$set(e.loginForm,"password","string"===typeof t?t.trim():t)},expression:"loginForm.password"}}),t("span",{staticClass:"show-pwd",on:{click:e.showPwd}},[t("svg-icon",{attrs:{"icon-class":"password"===e.passwordType?"eye":"eye-open"}})],1)],1)],1),t("el-button",{staticStyle:{width:"100%","margin-bottom":"0.2rem"},attrs:{loading:e.loading,type:"primary"},on:{click:e.openSilder}},[e._v(" "+e._s(e.loading?"登 录 中":"登 录")+" ")])],1)],1)}),c=[],d=r("03fd"),u=r("3786"),g=r("5f87"),p={name:"Login",props:{registerType:{type:Number,default:1}},data(){return{silderConfig:d["d"],timer:null,timeCount:60,isCanSendCode:!0,loginForm:{phone:void 0,verificationCode:void 0,password:""},loginRules:d["a"],passwordType:"password",loading:!1,verCodeLoading:!1}},watch:{registerType(){this.loginForm={phone:void 0,verificationCode:void 0,password:""},this.$refs["loginForm"].resetFields()},silderConfig:{handler(){!0===this.silderConfig.isSilderSuccess&&this.onLogin()},deep:!0}},methods:{onLogin(){this.loading=!0;let e={phone:this.loginForm.phone,password:this.loginForm.password};Object(u["b"])(e).then(e=>{200===e.code&&(this.$message.success("登录成功"),g["a"].setUserInfo(Object.assign(e.data.user,{token:e.data.token})),this.$router.push({name:"DashBoard"}))}).finally(()=>{this.loading=!1,this.silderConfig.isSilderSuccess=!1})},openSilder(){this.$refs["loginForm"].validate(e=>{e&&(this.silderConfig.isShowSilder=!0)})},onGetVerificationCode(){this.verCodeLoading=!0,Object(u["a"])().then(e=>{this.curVerCode=String(e.data.code),this.$message.success("验证码为:"+this.curVerCode),this.handleCode()}).finally(()=>{this.verCodeLoading=!1})},handleCode(){this.timer=setInterval(()=>{this.timeCount--,0===this.timeCount&&(this.isCanSendCode=!0,clearInterval(this.timer),this.timeCount=60,this.curVerCode=null)},1e3),this.isCanSendCode=!1},showPwd(){"password"===this.passwordType?this.passwordType="":this.passwordType="password"}}},f=p,h=(r("a598"),r("2877")),b=Object(h["a"])(f,l,c,!1,null,"5d75505a",null),m=b.exports,v=r("a2eb"),C=r.n(v),w={components:{LoginFormComp:m},data(){return{loginLeftPic:C.a,defaultLabel:1}},methods:{gotoRegister(){this.$router.push({name:"Register"})},resetPwd(){this.$router.push({name:"PasswordReset"})},changeLabel(e){this.defaultLabel=e}}},y=w,S=(r("9d6e"),Object(h["a"])(y,n,a,!1,null,"fa4ff30e",null)),_=S.exports,k=function(){var e=this,t=e._self._c;return t("section",{staticClass:"section"},[t("el-dialog",{attrs:{"close-on-click-modal":!1,visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[t("div",{staticClass:"slide-title"},[t("span",[e._v("安全验证")]),t("i",{staticClass:"el-icon-circle-close icon",on:{click:e.onClose}})]),t("div",{staticClass:"slider"},[t("slide-verify",{attrs:{show:!1,imgs:e.imgsList,l:42,r:10,w:600,h:300,"slider-text":"拖动左边滑块完成上方拼图"},on:{success:e.onSuccess,fail:e.onFail}})],1)])],1)},x=[],L={name:"App",data(){return{dialogVisible:!0,imgsList:[]}},created(){for(let e=0;e<3;e++)r("1bf6")(`./${e+1}.png`).then(e=>{this.imgsList.push(e.default)})},methods:{onSuccess(){d["d"].isSilderSuccess=!0,d["d"].isShowSilder=!1},onFail(){d["d"].isSilderSuccess=!1},onClose(){d["d"].isShowSilder=!1}}},F=L,O=(r("e618"),Object(h["a"])(F,k,x,!1,null,"795c187a",null)),P=O.exports,T={components:{AuthBackComp:o["a"],LoginContainerComp:_,Silder:P},data(){return{silderConfig:d["d"]}}},$=T,j=Object(h["a"])($,i,s,!1,null,null,null);t["default"]=j.exports},e618:function(e,t,r){"use strict";r("1479")},e8b5:function(e,t,r){var i=r("c6b6");e.exports=Array.isArray||function(e){return"Array"==i(e)}},eea0:function(e,t,r){e.exports=r.p+"img/footer.5f2538a4.png"}}]);
//# sourceMappingURL=chunk-4b8c976e.68e04c49.js.map